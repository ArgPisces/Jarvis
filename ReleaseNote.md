### Release Note - v0.1.195 2025-06-04

#### **新功能 (Features)**  
- 新增Jarvis历史记录功能(jarvis_history)
- 新增Jarvis通用代理工具功能文档

#### **优化与重构 (Refactors & Improvements)**  
- 改进git差异获取逻辑，支持空仓库情况
- 优化输出异常处理，防止崩溃
- 增强方法论上传功能，支持同时上传其他文件
- 改进代码导入组织，加快初始化速度

#### **文档更新 (Documentation)**  
- 更新README.md，添加Jarvis通用代理工具详细文档

#### **其他 (Miscellaneous)**  
- 修复git差异解码错误处理
- 改进文件上传失败处理逻辑
- 优化代码格式和类型提示

本次更新主要增强了Jarvis的历史记录功能，改进了git操作和异常处理，并完善了文档体系。

### Release Note - v0.1.194 2025-06-01

#### **新功能 (Features)**  
- 添加重新加载配置功能
- 添加ToolUsage标记处理功能
- 在提交流程中提前获取修改文件列表

#### **修复 (Fixes)**  
- 修复缩进处理时空行也被添加空格的问题
- 调整工具调用和中断处理的执行顺序

#### **优化与重构 (Refactors & Improvements)**  
- 将配置文件加载逻辑提取到独立函数
- 优化代码格式和导入顺序
- 精简各语言默认的lint工具配置
- 移除未使用的导入语句和功能

#### **文档更新 (Documentation)**  
- 重构文档结构并优化内容组织

本次更新主要包含配置管理增强、工具调用流程优化、代码质量改进和文档重构。

### Release Note - v0.1.193 2025-05-31

#### **新功能 (Features)**  
- 添加example/roles/roles.yaml角色配置文件
- 完善代码代理功能文档和使用说明

#### **修复 (Fixes)**  
- 修复addon_prompt生成逻辑
- 修复代码代理功能中的文件修改提示逻辑
- 修复yuanbao平台初始化参数传递问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化代码代理功能的输出格式
- 重构工具注册表的输出格式
- 改进方法论模块的输出显示

#### **文档更新 (Documentation)**  
- 更新README.md添加代码代理功能说明
- 完善内置工具帮助文档

#### **其他 (Miscellaneous)**  
- 添加空文件处理逻辑
- 改进错误处理提示

本次更新主要新增了代码代理功能，并优化了多个模块的输出显示和错误处理。

### Release Note - v0.1.192 2025-05-31

#### **新功能 (Features)**  
- 新增OpenAI平台文件上传功能支持检测方法
- 改进中断信号处理机制，支持中断计数

#### **修复 (Fixes)**  
- 修复用户干预信息拼接格式问题
- 修正补丁应用后的提示信息显示逻辑

#### **优化与重构 (Refactors & Improvements)**  
- 重构全局变量管理代码，改进代码格式和可读性
- 优化中断信号处理逻辑，增加多次中断保护
- 改进代码代理的返回信息提示

#### **文档更新 (Documentation)**  
- 更新代码注释和类型提示

#### **其他 (Miscellaneous)**  
- 调整控制台主题配置格式
- 优化SIGINT信号处理逻辑

本次更新主要改进了中断处理机制和代码可维护性，新增了文件上传功能支持检测，并优化了用户交互体验。

### Release Note - v0.1.191 2025-05-31

#### **新功能 (Features)**  
- 新增角色配置功能，支持从YAML文件加载角色配置并开始对话
- 添加中断处理机制，支持在模型交互期间接收SIGINT信号
- 为平台管理器添加角色子命令(--role/-c)

#### **修复 (Fixes)**  
- 修复了文件分析工具的输出格式，使用<output>和<error>标签包裹
- 修复了set_system_message方法名不一致问题，统一为set_system_prompt

#### **优化与重构 (Refactors & Improvements)**  
- 重构了平台管理器的代码结构，提高可读性
- 移除了默认的addon提示

#### **文档更新 (Documentation)**  
- 更新了工具注册表的输出处理文档
- 添加了角色配置文件的示例说明

#### **其他 (Miscellaneous)**  
- 优化了信号处理逻辑

本次更新主要增强了平台管理器的功能，新增了角色配置支持，并改进了中断处理机制，提高了系统的稳定性和用户体验。

### Release Note - v0.1.190 2025-05-30

#### **新功能 (Features)**  
- 新增预定义任务(pre-command)功能，支持通过YAML文件快速执行常用命令
- 工具生成功能增加自动依赖检查和安装功能

#### **修复 (Fixes)**  
- 修复了工具注册时参数处理的问题
- 移除了已废弃的`jarvis-ask-codebase`功能

#### **优化与重构 (Refactors & Improvements)**  
- 优化了工具生成器的代码结构和错误处理
- 改进了工具注册流程的稳定性
- 增强了工具生成时的依赖管理功能

#### **文档更新 (Documentation)**  
- 更新了README中的预定义任务使用说明
- 完善了工具生成功能的文档

#### **其他 (Miscellaneous)**  
- 更新了微信图片资源

本次更新主要增强了工具的生成和管理能力，特别是新增了预定义任务功能和自动依赖管理功能，同时优化了现有功能的稳定性和用户体验。

### Release Note - v0.1.189 2025-05-29

#### **新功能 (Features)**  
- 新增`support_upload_files()`方法用于检查平台是否支持文件上传
- 新增`generate_summary()`方法用于生成对话历史摘要
- 优化了代码差异文件上传处理逻辑

#### **修复 (Fixes)**  
- 修复了文件上传失败时的错误处理流程
- 修复了`clear_history()`方法的重命名问题
- 修复了平台不支持上传文件时的错误提示

#### **优化与重构 (Refactors & Improvements)**  
- 重构了`GitCommitTool`的代码结构，提取了独立方法
- 优化了文件上传前的平台支持检查
- 改进了大文件处理逻辑

#### **文档更新 (Documentation)**  
- 更新了方法文档字符串
- 完善了错误提示信息

#### **其他 (Miscellaneous)**  
- 调整了`JARVIS_MAX_BIG_CONTENT_SIZE`默认值为160000
- 优化了代码格式和缩进风格

本次更新主要优化了文件上传处理流程，新增了平台支持检查功能，并改进了错误处理机制。

### Release Note - v0.1.188 2025-05-28

#### **新功能 (Features)**  
- 新增RefactorCheckerExpert重构检查专家，用于检查重构后的代码逻辑是否与原代码完全一致

#### **修复 (Fixes)**  
- 修复了文件输入处理器中文件引用解析的问题，防止有其他引号干扰文件路径解析
- 修复了edit_file工具中补丁应用失败的问题，现在会自动尝试增加1-16个空格缩进重试匹配

#### **优化与重构 (Refactors & Improvements)**  
- 重构了jarvis_agent的初始化逻辑，调整了输入处理器的执行顺序
- 优化了文件输入处理器的中文注释和错误处理
- 去除了main.py中的交互模式循环结构

#### **文档更新 (Documentation)**  
- 更新了RefactorCheckerExpert的详细工作流程文档
- 完善了file_input_handler的中文参数说明

#### **其他 (Miscellaneous)**  
- 改进了edit_file工具的错误提示信息，现在会显示更详细的匹配失败原因

本次更新主要增强了代码重构检查能力，改进了文件处理逻辑，并优化了用户体验。

### Release Note - v0.1.187 2025-05-27

#### **修复 (Fixes)**  
- 修复了config参数从必选改为可选(main.py)
- 修复了对话长度计算逻辑(__init__.py)

#### **优化与重构 (Refactors & Improvements)**  
- 优化了模型响应处理流程(__init__.py)
- 改进了文件上传后的提示信息(__init__.py)

### Release Note - v0.1.186 2025-05-27

#### **新功能 (Features)**  
- 新增支持通过`-f/--config`参数指定自定义配置文件路径
- 添加对`-c/--agent_definition`参数的支持，用于指定代理定义文件

#### **修复 (Fixes)**  
- 修复文件编辑工具中文件路径处理问题，现在使用绝对路径

#### **优化与重构 (Refactors & Improvements)**  
- 重构`init_env`函数，支持通过参数传递配置文件路径
- 优化配置文件加载逻辑
- 改进HuggingFace模型解压路径处理

本次更新主要增强了配置管理功能，改进了初始化流程，并修复了文件路径处理相关的问题。

### Release Note - v0.1.185 2025-05-26

#### **新功能 (Features)**  
- 推荐腾讯元宝作为首选平台，优化了平台适配性
- 新增文件上传功能，支持在Agent初始化时自动上传文件
- 扩展通义平台支持的文件类型，新增对多种图片格式的支持

#### **修复 (Fixes)**  
- 修复了文件处理工具中的文件存在性检查逻辑
- 修复了补丁应用失败时的错误信息显示问题
- 修复了工具调用格式错误的提示信息

#### **优化与重构 (Refactors & Improvements)**  
- 优化了README文档中的平台推荐说明
- 重构了文件上传处理流程，提升稳定性
- 改进了补丁应用的错误处理机制

#### **文档更新 (Documentation)**  
- 更新了README中的配置说明，明确推荐腾讯元宝平台
- 完善了工具调用格式错误的帮助信息

本次更新主要增强了文件处理能力和平台适配性，优化了用户体验和错误处理机制。

### Release Note - v0.1.184 2025-05-26

#### **新功能 (Features)**
- 添加文件上传进度指示和错误处理
  - 在文件上传过程中增加了进度指示，并改进了错误处理机制。
- 添加系统消息初始化功能
  - 增加了系统消息支持，以提升对话初始化的功能。

#### **代码优化与修复 (Code Refinement & Fixes)**
- 移除了生成新工具时的代码验证和处理步骤，直接写入原始工具代码。
  - 这简化了工具生成流程，但可能要求用户提供更规范的输入代码。

本次更新主要优化了文件上传的用户体验，并增加了系统消息的支持，以提升对话初始化的功能。

#### **新功能 (Features)**  
- 新增通义千问平台支持，包含四种模型类型：Normal, Thinking, Deep-Research, Code-Chat
- 添加通义千问cookies获取指南和配置说明文档
- 新增通义千问平台实现文件(src/jarvis/jarvis_platform/tongyi.py)

#### **修复 (Fixes)**  
- 修复Yuanbao平台中思考模式消息处理逻辑
- 修复Kimi平台模型名称返回问题

#### **优化与重构 (Refactors & Improvements)**  
- 优化平台注册表中不再需要的set_suppress_output方法
- 统一各平台思考模式消息处理格式

#### **文档更新 (Documentation)**  
- 更新README.md添加通义千问平台配置说明
- 添加通义千问cookies获取图示(docs/images/tongyi.png)

本次更新主要新增了对通义千问平台的支持，提供了完整的平台实现和配置文档，并优化了现有平台的消息处理逻辑。

### Release Note - v0.1.182 2025-05-25

#### **新功能 (Features)**  
- 新增文件输入处理功能 (file_input_handler.py)
- 新增用户数据存储功能 (__init__.py)
- 新增文件内容读取时的用户数据跟踪功能 (file_operation.py, read_code.py)

#### **修复 (Fixes)**  
- 修正git diff命令参数错误 (pre-command)
- 修复文件操作工具中的边界条件问题 (file_operation.py)

#### **优化与重构 (Refactors & Improvements)**  
- 优化编辑工具的核心逻辑 (edit_file.py)
- 改进代码阅读工具的输出格式 (read_code.py)
- 重构系统提示标签格式 (__init__.py)

#### **文档更新 (Documentation)**  
- 更新jarvis_agent模块的初始化文档 (__init__.py)

本次更新主要增强了文件处理能力和用户数据管理功能，同时优化了核心工具的性能和稳定性。新增的文件输入处理功能可以智能识别文件引用并自动读取内容，用户数据存储功能为工具间数据共享提供了便利。

### Release Note - v0.1.181 2025-05-24

#### **主要变更**
1. **文档清理**
- 移除了所有过时的文档图片和markdown文件
- 清理了不再使用的用户文档内容

2. **代码重构**
- 大幅精简了code_agent.py的实现逻辑
- 移除了find_methodology工具及相关代码
- 优化了配置系统，使用原生布尔类型替代字符串配置
- 重构了git工具函数到专用模块

3. **功能调整**
- 移除了ask_codebase工具的全部实现
- 更新了多个工具的默认配置值
- 增强了execute_script工具的功能

4. **其他改进**
- 更新了项目依赖配置
- 优化了多个工具的实现细节
- 清理了不再使用的代码和资源


### Release Note - v0.1.180 2025-05-23

#### **新功能 (Features)**  
- 新增yaml配置文件方式配置替换键值对
- 添加MCP工具配置支持并重构注册逻辑
- 重构配置文件管理逻辑
- Kimi、OpenAI和Yuanbao平台认证配置项使用ENV配置管理
- 添加配置文件schema支持并改进配置文件处理

#### **修复 (Fixes)**  
- 修正自动更新配置默认值
- 修正文件编辑工具中的补丁内容格式化

#### **优化与重构 (Refactors & Improvements)**  
- 将配置文件读取逻辑拆分为独立函数
- 重构环境初始化逻辑以同时支持配置文件和旧版env文件
- 简化命令使用统计逻辑并移除未使用的datetime导入
- 优化MCP配置错误信息的输出内容
- 优化版本检查和更新逻辑
- 优化配置项枚举值的格式并移除未使用的API配置
- 将环境变量配置重构为通用配置系统
- 移除不再使用的旧配置文件引用

#### **文档更新 (Documentation)**  
- 更新配置方式说明并移除废弃方法
- 更新MCP配置文档并调整配置模式
- 更新Yuanbao配置格式
- 更新配置文件格式和路径说明
- 为所有MCP配置模式添加enable字段说明
- 添加流式MCP配置说明

#### **其他 (Miscellaneous)**  
- 添加旧配置文件格式迁移警告
- 移除API密钥未设置时的详细指引信息
- 为所有yaml.safe_dump调用添加allow_unicode参数支持

本次更新主要围绕配置系统进行了全面重构和功能增强，新增了多平台API支持，优化了文档和错误处理机制，并修复了若干关键问题。


### Release Note - v0.1.179 2025-05-22

#### **新功能 (Features)**  
- 添加可流式传输的HTTP MCP客户端实现(StreamableMcpClient)
- 新增lint工具支持并集成到代码修改提示中
- 添加命令使用统计功能
- 添加YAML格式配置文件支持
- 添加任务分析功能支持

#### **修复 (Fixes)**  
- 修改环境变量默认值：JARVIS_USE_METHODOLOGY和JARVIS_USE_ANALYSIS从'true'改为'false'
- 移除不再使用的lsp_get_diagnostics工具

#### **优化与重构 (Refactors & Improvements)**  
- 优化代码结构和导入顺序
- 优化lint工具匹配逻辑并统一文件名大小写处理
- 优化git差异获取功能以包含新增文件
- 优化操作列表的显示格式
- 优化系统提示格式和内容
- 优化提交信息生成提示模板结构

#### **文档更新 (Documentation)**  
- 统一函数文档字符串格式
- 更新README导航链接格式
- 更新配置格式并添加文件路径说明

#### **其他 (Miscellaneous)**  
- 删除空文件aaaa
- 移除不再需要的依赖项(jedi和sseclient)
- 添加tabulate依赖项

本次更新主要增强了配置管理、代码质量检查和统计功能，同时进行了多项代码优化和重构。特别值得注意的是配置系统的改进，包括YAML格式支持和环境变量默认值的调整。


### Release Note - v0.1.178 2025-05-21

#### **新功能 (Features)**  
- 添加方法论分析功能，支持通过配置启用任务分析和方法论生成
- 新增`use_methodology`参数控制方法论的使用
- 增强文件编辑工具功能，支持两种编辑模式和AI辅助编辑

#### **修复 (Fixes)**  
- 修复工具过滤逻辑错误，避免KeyError异常
- 修正生成release note时的git log参数错误
- 移除冗余的错误信息输出和未使用的库导入

#### **优化与重构 (Refactors & Improvements)**  
- 移除整个LSP实现模块，将被新的代码分析架构替代
- 重构文件编辑工具文档，提供更清晰的使用指南
- 更新代码库分析工具的平台配置

#### **文档更新 (Documentation)**  
- 为OpenAIModel类添加详细方法文档
- 在分析步骤中新增要求，确保结论基于实际代码证据
- 更新微信二维码图片

#### **其他 (Miscellaneous)**  
- 修改任务完成提示逻辑，明确禁止输出TOOL_CALL标签
- 清理代码保持简洁性

本次更新主要包含功能增强、错误修复和架构优化，特别是新增了方法论分析功能并重构了文件编辑工具。同时移除了LSP相关模块，为新的代码分析架构做准备。


### 版本发布说明 - v0.1.177 (2025-05-20)

#### ✨ 核心功能增强
1. **全新欢迎系统**
   - 为所有工具添加动态ASCII艺术欢迎界面
   - 实现渐变色彩文本输出效果（蓝→青渐变）
   - 显示版本号和项目链接

2. **代码编辑工具升级**
   - 新增`fast_edit`快速编辑模式
   - 优化`slow_edit`容错机制（3次重试）
   - 增强补丁应用的唯一性检查

3. **统计监控**
   - 新增工具调用次数统计
   - 支持通过`jarvis-tools stat`查看排名
   - 数据持久化存储到`tool_stat.yaml`

#### 🐛 关键修复
1. **稳定性修复**
   - 支持`MAX_TOOL_CALL_COUNT=0`时工具无限调用
   - 解决长文本分块时的最小块大小计算错误
   - 修正Yuanbao平台文件大小显示格式

2. **输出优化**
   - 统一所有错误信息的图标间距
   - 将语法高亮主题从Dracula改为Monokai
   - 优化多行输出的显示逻辑

#### ⚙️ 配置变更
| 配置项 | 原值 | 新值 | 说明 |
|-------|------|------|------|
| MAX_TOKEN_COUNT | 102M | 960K | 降低内存占用 |
| MAX_BIG_CONTENT | 96K | 1M | 支持更大文件处理 |
| MAX_TOOL_CALLS | 20 | 0=∞ | 支持无限调用模式 |

### Release Note - v0.1.176 2025-05-19

#### **新功能 (Features)**
- 无

#### **修复 (Fixes)**
- 修正pre-command文件中git diff命令的格式说明
- 更新JARVIS_MAX_BIG_CONTENT_SIZE配置值
- 添加JARVIS_PRETTY_OUTPUT配置选项

#### **优化与重构 (Refactors & Improvements)**
- 优化文件输入处理逻辑
- 重构平台聊天输出处理
- 改进文本分块处理逻辑

#### **文档更新 (Documentation)**
- 更新README.md中的配置说明

#### **其他 (Miscellaneous)**
- 删除未使用的file_input_handler模块

本次更新主要优化了代码结构和配置选项，移除了不使用的模块，并改进了文本处理逻辑。

### Release Note - v0.1.175 2025-05-17

#### **新功能 (Features)**
- 新增了方法论上传功能，支持将方法论上传到平台
- 在代码代理中添加了静态检查工具支持
- 为Kimi、OpenAI和Yuanbao平台添加了Rich实时输出显示功能
- 在平台管理器中新增对话记录保存功能(/save和/saveall命令)

#### **修复 (Fixes)**
- 修复了pre-command文件中release_note生成步骤的描述
- 移除了jarvis_agent中冗余的print_stream方法
- 修正了工具注册表中的格式说明

#### **优化与重构 (Refactors & Improvements)**
- 优化了多agent系统的消息格式
- 改进了方法论提取和上传逻辑
- 重构了平台交互的输出显示方式

#### **文档更新 (Documentation)**
- 更新了pre-command文档中的指令说明
- 完善了方法论模板格式

#### **其他 (Miscellaneous)**
- 统一了各平台的消息格式规范
- 优化了代码格式和注释

本次更新主要针对平台交互、方法论管理和输出显示进行了全面优化，提升了系统的交互体验和可维护性。


### Release Note - v0.1.174 2025-05-16

#### **修复 (Fixes)**  
- 调整JARVIS_MAX_BIG_CONTENT_SIZE默认值从64000到96000

#### **优化与重构 (Refactors & Improvements)**  
- 优化长文本处理逻辑和token计算方式

本次更新主要优化了文本处理逻辑和token计算方式。

### Release Note - v0.1.173 2025-05-16

#### **修复 (Fixes)**  
- 调整JARVIS_MAX_BIG_CONTENT_SIZE默认值为64000，优化内存使用

本次更新主要优化了系统内存使用效率，将大内容处理默认值调整为更合理的62.5KB。


### Release Note - v0.1.171 2025-05-16

#### **新功能 (Features)**  
- 添加生成ReleaseNote的自动化流程
- 添加长上下文交互时的进度显示
- 新增JARVIS_MAX_BIG_CONTENT_SIZE配置参数
- 改进任务分析流程和工作生成机制
- 重构任务分析提示模板以支持工作生成和版本控制
- 为agent添加基本优先级显示
- 改进release_note生成格式和内容结构  

#### **修复 (Fixes)**  
- 修正ReleaseNote.md文件写入方式为追加导致重复问题
- 修改默认最大内容大小从10MB改为1MB
- 修复上下文丢失时的空响应处理
- 修复自定义回复循环和显示格式问题
- 修复大文件上下文丢失时的错误处理逻辑  

#### **优化与重构 (Refactors & Improvements)**  
- 优化上下文长度过滤编辑逻辑
- 简化对话配置和结果显示模板
- 移除chat_big_content策略并统一为大内容处理编辑逻辑  

#### **文档更新 (Documentation)**  
- 更新release_note生成编辑和重命名文件
- 更新pre-command文档中jgc命令的说明
- 重构发布说明格式和补充细节更新内容  

#### **其他 (Miscellaneous)**  
- 在发布说明中添加当前日期和预期发布时间

本次更新主要改进了发布流程自动化，优化了任务分析机制，并修复了多个关键问题。