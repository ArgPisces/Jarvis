# 3. 核心概念

要深入了解并有效使用 Jarvis，理解其背后的几个核心概念至关重要。本章将介绍构成 Jarvis 系统的基石：**代理（Agent）**、**工具（Tool）**、**平台（Platform）**、**方法论（Methodology）** 和 **MCP（Model Communication Protocol）**。

## 3.1 代理 (Agent)

**代理**是 Jarvis 的“大脑”和执行中枢。每个代理都是一个专门为特定目标设计的智能实体。它负责：

1.  **理解用户意图**：解析用户的自然语言指令或任务描述。
2.  **规划任务**：将复杂任务分解为一系列可执行的、更小的步骤。
3.  **调用工具**：根据规划，选择并执行合适的工具来完成每个步骤。
4.  **分析结果**：评估工具执行的输出，判断任务是否成功，并决定下一步行动。
5.  **与用户交互**：在需要时向用户请求额外信息、寻求决策或报告进度。

Jarvis 提供了多种预置代理（如 `jarvis-code-agent`、`jarvis-git-commit`），每个都针对特定领域（如代码修改、Git操作）进行了优化。同时，通过 `jarvis-agent`，您还可以定义和运行自己的自定义代理。

## 3.2 工具 (Tool)

如果说代理是“大脑”，那么**工具**就是 Jarvis 的“双手”。工具是原子化的、功能单一的可执行单元，代理通过调用它们来与外部世界进行实际的交互。

Jarvis 内置了丰富的工具集，包括：

-   `execute_script`: 执行 Shell 或 Python 脚本。
-   `edit_file`: 对文件进行精确的搜索和替换。
-   `rewrite_file`: 完全重写或创建文件。
-   `read_code`: 读取并分析代码文件的内容。
-   `search_web`: 使用搜索引擎在互联网上查找信息。
-   `ask_user`: 向用户提问并获取输入。

工具的强大之处在于其**模块化和可扩展性**。您可以非常轻松地在 `~/.jarvis/tools/` 目录下创建自己的工具，以扩展 Jarvis 的能力，使其能够与您的特定API、数据库或内部系统进行交互。

## 3.3 平台 (Platform)

**平台**是大型语言模型（LLM）的统一接口层。Jarvis 通过平台抽象层来与各种不同的 LLM 提供商进行交互，例如腾讯元宝、Kimi、通义千问或 OpenAI。

这种设计带来了几个好处：

-   **一致的体验**：无论后端使用哪个 LLM，与 Jarvis 的交互方式保持一致。
-   **轻松切换**：您只需修改配置文件，就可以在不同的 LLM 平台之间无缝切换，而无需更改任何代码或工作流程。
-   **高度可扩展**：您可以方便地在 `~/.jarvis/platforms/` 目录下添加对新 LLM 平台的支持。

通过 `jarvis-platform-manager` (`jpm`) 工具，您可以方便地查看所有已支持的平台和模型，并与之进行直接对话。

## 3.4 方法论 (Methodology)

**方法论**是 Jarvis 实现“智能进化”的核心机制。它是一套结构化的、用于指导代理解决问题的“思维框架”或“最佳实践”。

当面对一个任务时，启用了方法论的代理会：

1.  首先，不直接解决问题，而是思考“**解决这类问题的最佳方法是什么？**”
2.  基于其知识和过去的经验，形成一个解决该问题的**结构化步骤或原则**（即方法论）。
3.  然后，严格遵循这个自己创建的方法论来执行任务。

这个过程就像一位经验丰富的工程师在动手编码前，会先在脑中或白板上构思架构和步骤一样。通过这种方式，Jarvis 能够：

-   提高解决复杂问题的成功率。
-   形成更优、更可靠的解决方案。
-   从与用户的交互中学习和提炼新的方法论，从而不断成长。

## 3.5 MCP (Model Communication Protocol)

**MCP** 是一种标准化的**模型通信协议**。它定义了 Jarvis 与外部模型（无论是LLM还是其他专用AI模型）进行交互的统一规范。任何实现了 MCP 的外部服务，都可以被 Jarvis 动态加载并作为“平台”或“工具”来使用。

MCP 的设计旨在实现极致的灵活性和可扩展性，让 Jarvis 生态能够轻松集成任何第三方AI能力。
